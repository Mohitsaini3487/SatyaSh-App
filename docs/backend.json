{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user's profile in the SatyaSh शोधak application.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the UserProfile entity."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "username": {
          "type": "string",
          "description": "User's username."
        },
        "mobileNumber": {
          "type": "string",
          "description": "User's mobile phone number."
        },
        "socialLinks": {
          "type": "array",
          "description": "An array of social media links associated with the user.",
          "items": {
            "type": "string"
          }
        },
        "preferences": {
          "type": "string",
          "description": "User's preferences (e.g., language, notification settings)."
        }
      },
      "required": [
        "id",
        "email",
        "username"
      ]
    },
    "FraudDetectionHistory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "FraudDetectionHistory",
      "type": "object",
      "description": "Represents a record of fraud detection analysis performed by the user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the FraudDetectionHistory entry."
        },
        "userId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N FraudDetectionHistory)"
        },
        "analysisTimestamp": {
          "type": "string",
          "description": "Timestamp indicating when the analysis was performed.",
          "format": "date-time"
        },
        "inputType": {
          "type": "string",
          "description": "The type of input analyzed (text, file, link, video)."
        },
        "inputContent": {
          "type": "string",
          "description": "The analyzed content (e.g., text, file path, URL)."
        },
        "fraudPercentage": {
          "type": "number",
          "description": "The percentage indicating the likelihood of fraud."
        },
        "explanation": {
          "type": "string",
          "description": "Detailed explanation of the fraud detection analysis."
        }
      },
      "required": [
        "id",
        "userId",
        "analysisTimestamp",
        "inputType",
        "inputContent",
        "fraudPercentage",
        "explanation"
      ]
    },
    "AiSummaryHistory": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AiSummaryHistory",
      "type": "object",
      "description": "Represents a record of AI summarization performed by a user.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the AiSummaryHistory entry."
        },
        "userId": {
          "type": "string",
          "description": "Reference to UserProfile. (Relationship: UserProfile 1:N AiSummaryHistory)"
        },
        "inputContent": {
          "type": "string",
          "description": "The original text, file, or link that was summarized."
        },
        "summarizedContent": {
          "type": "string",
          "description": "The summarized text generated by the AI."
        },
        "inputLanguage": {
          "type": "string",
          "description": "The language of the original input."
        },
        "outputLanguage": {
          "type": "string",
          "description": "The language of the summarized output."
        },
        "summaryTimestamp": {
          "type": "string",
          "description": "Timestamp indicating when the summarization was performed.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "inputContent",
        "summarizedContent",
        "inputLanguage",
        "outputLanguage",
        "summaryTimestamp"
      ]
    }
  },
  "auth": {
    "providers": [
      "google"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "UserProfile",
          "schema": {
            "$ref": "#/backend/entities/UserProfile"
          },
          "description": "Stores user profiles. Uses path-based ownership for private user data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/fraudDetectionHistory/{historyId}",
        "definition": {
          "entityName": "FraudDetectionHistory",
          "schema": {
            "$ref": "#/backend/entities/FraudDetectionHistory"
          },
          "description": "Stores fraud detection history for each user. Uses path-based ownership for private user data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "historyId",
              "description": "The unique identifier for the FraudDetectionHistory entry."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}/aiSummaryHistory/{historyId}",
        "definition": {
          "entityName": "AiSummaryHistory",
          "schema": {
            "$ref": "#/backend/entities/AiSummaryHistory"
          },
          "description": "Stores AI summarization history for each user. Uses path-based ownership for private user data.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            },
            {
              "name": "historyId",
              "description": "The unique identifier for the AiSummaryHistory entry."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to ensure security, scalability, and ease of debugging, following the principles of Authorization Independence, Clarity of Intent, DBAC, and QAPs. Authorization independence is achieved by avoiding `get()` calls in security rules, primarily through denormalization. Data is segregated into collections with homogeneous security postures to simplify rules. Access control is managed via path-based ownership for user-specific data. History information are recorded, as per user request, for fraud detection and AI summarization actions. This structure supports QAPs (rules are not filters) by enabling secure `list` operations using path based rules."
  }
}